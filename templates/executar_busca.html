<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Executar Busca</title>
    <link rel="stylesheet" href="/static/css/style.css">
</head>
<body>
    <main class="container">
        <h1>Executar Busca de Palavras-chave</h1>
        <div class="alert-info" role="alert">
            <b>Aviso:</b> Cada prompt pode ser grande e irá gerar <b>6 artigos completos</b> por cluster. O processamento pode demorar e consumir recursos significativos.
        </div>
        <form id="form-executar-busca" method="post" action="/executar_busca" enctype="multipart/form-data">
            <label for="blog">Blog:</label>
            <select id="blog" name="blog" required>
                <option value="">Selecione um blog</option>
                {% for blog in blogs %}
                <option value="{{ blog.dominio }}">{{ blog.nome }} ({{ blog.dominio }})</option>
                {% endfor %}
            </select>

            <label>Categorias:</label>
            <div id="categorias-container">
                <!-- Categorias serão preenchidas via JS ao selecionar blog -->
            </div>

            <label for="prompt_base">Prompt base:</label>
            <select id="prompt_base" name="prompt_base">
                <option value="">Selecione um prompt</option>
                {% for prompt in prompts %}
                <option value="{{ prompt }}">{{ prompt }}</option>
                {% endfor %}
            </select>
            <span>ou</span>
            <input type="file" id="prompt_upload" name="prompt_upload" accept=".txt">

            <label for="modo">Modo de execução:</label>
            <select id="modo" name="modo" required>
                <option value="real">Geração real</option>
                <option value="dry-run">Dry-run (simulação)</option>
            </select>

            <button type="submit">Executar geração</button>
        </form>
        <section id="resumo-parametros" style="display:none;"></section>
        <section id="execucao-status" aria-live="polite">
            <div id="barra-progresso" style="display:none;">
                <div id="progresso-preenchido"></div>
            </div>
            <!-- Status em tempo real será exibido aqui -->
        </section>
        <div id="feedback" aria-live="polite">
            {% if feedback %}
                <div class="feedback {{ feedback_status }}">{{ feedback }}</div>
            {% endif %}
        </div>
    </main>
    <script src="/static/js/executar_busca.js"></script>
</body>
</html> 